{"remainingRequest":"/Users/steini/Documents/GitHub/New-Final-426/client-ours/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/steini/Documents/GitHub/New-Final-426/client-ours/client/src/components/Comments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/steini/Documents/GitHub/New-Final-426/client-ours/client/src/components/Comments.vue","mtime":1575672437960},{"path":"/Users/steini/Documents/GitHub/New-Final-426/client-ours/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steini/Documents/GitHub/New-Final-426/client-ours/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/steini/Documents/GitHub/New-Final-426/client-ours/client/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/steini/Documents/GitHub/New-Final-426/client-ours/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/steini/Documents/GitHub/New-Final-426/client-ours/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Y3JlYXRlQ29tbWVudH0gZnJvbSAiLi4vYXBpL2NvbW1lbnQvQ29tbWVudCI7CmltcG9ydCB7Z2V0QWxidW1Db21tZW50c30gZnJvbSAiLi4vYXBpL2NvbW1lbnQvQ29tbWVudCI7CmltcG9ydCB7dXBkYXRlQ29tbWVudHN9IGZyb20gIi4uL2FwaS9jb21tZW50L0NvbW1lbnQiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6ICgpID0+ICh7CiAgICB1c2VyTmFtZTogJ1N0ZWluaScsCiAgICBjb21tZW50OiAiIiwKICAgIGFsYnVtSUQ6ICI3NzZVbzg0NW5ZSEpwTmFTdHYxRHM0IiwKICAgIGFsYnVtQ29tbWVudHM6IFtdCiAgfSksCiAgbWV0aG9kczogewogICAgYXN5bmMgc3VibWl0Q29tbWVudCgpIHsKICAgICAgLy9jaGVja2luZyBpZiBhbGJ1bUlEIGV4aXN0cwogICAgICAvL2xldCByZXN1bHQgPSBhd2FpdCBheGlvcy5nZXQoJycpOwogICAgICBsZXQgY29tbWVudHMgPSAoYXdhaXQgY3JlYXRlQ29tbWVudCh7dXNlcjogdGhpcy51c2VyTmFtZSwgY29tbWVudEJvZHk6IHRoaXMuY29tbWVudCwgYWxidW1JRDogdGhpcy5hbGJ1bUlEIH0pKTsKICAgICAgdGhpcy5hbGJ1bUNvbW1lbnRzLnVuc2hpZnQoe3VzZXI6IHRoaXMudXNlck5hbWUsIGNvbW1lbnRCb2R5OiB0aGlzLmNvbW1lbnQsIGFsYnVtSUQ6IHRoaXMuYWxidW1JRCwgZGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKCkgfSkKICAgICAgdGhpcy5jb21tZW50ID0gIiI7CiAgICAgIHJldHVybiBjb21tZW50czsKICAgICAgLy9jb25zb2xlLmxvZyhjb21tZW50cyk7CiAgICB9LAogICAgYXN5bmMgZmV0Y2hBbGJ1bUNvbW1lbnRzKCkgewogICAgICBsZXQgY29tbWVudHMgPSAoYXdhaXQgZ2V0QWxidW1Db21tZW50cyh7YWxidW1JRDogdGhpcy5hbGJ1bUlEIH0pKTsKICAgICAgLy90aGlzLmFsYnVtQ29tbWVudHMgPSBjb21tZW50czsKCiAgICAgIHRoaXMuYWxidW1Db21tZW50cyA9IFtdOwoKICAgICAgY29tbWVudHMuZm9yRWFjaChjb21tZW50ID0+IHsKICAgICAgICAgIHRoaXMuYWxidW1Db21tZW50cy5wdXNoKHsKICAgICAgICAgICAgLi4uY29tbWVudCwKICAgICAgICAgICAgZWRpdDogZmFsc2UsCiAgICAgICAgICAgIGVkaXRWZXJzaW9uOiAiIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICApOwoKICAgICAgcmV0dXJuIGNvbW1lbnRzOwogICAgfSwKICAgIGFzeW5jIGRlbGV0ZUNvbW1lbnQoZGF0ZSkgewoKICAgICAgdGhpcy5hbGJ1bUNvbW1lbnRzID0gdGhpcy5hbGJ1bUNvbW1lbnRzLmZpbHRlcihjb21tZW50ID0+IGNvbW1lbnQuZGF0ZSAhPT0gZGF0ZSk7CiAKICAgICAgdmFyIHRtcCA9IFtdCiAgICAgIHRoaXMuYWxidW1Db21tZW50cy5mb3JFYWNoKGNvbW1lbnQgPT4gewogICAgICAgICAgdG1wLnB1c2goewogICAgICAgICAgICBhbGJ1bUlEOiBjb21tZW50LmFsYnVtSUQsCiAgICAgICAgICAgIHVzZXI6IGNvbW1lbnQudXNlciwKICAgICAgICAgICAgY29tbWVudEJvZHk6IGNvbW1lbnQuY29tbWVudEJvZHksCiAgICAgICAgICAgIGRhdGU6IGNvbW1lbnQuZGF0ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICApOwoKICAgICAgYXdhaXQgdXBkYXRlQ29tbWVudHModG1wKTsKICAgIH0sCiAgICBhc3luYyBlZGl0Q29tbWVudChkYXRlKSB7CiAgICAgIHZhciBjb21tZW50SW5kZXggPSB0aGlzLmFsYnVtQ29tbWVudHMuZmluZEluZGV4KGNvbW1lbnQgPT4gY29tbWVudC5kYXRlID09IGRhdGUpOwogICAgICB0aGlzLmFsYnVtQ29tbWVudHNbY29tbWVudEluZGV4XS5lZGl0ID0gdHJ1ZTsKICAgICAgdGhpcy5hbGJ1bUNvbW1lbnRzW2NvbW1lbnRJbmRleF0uZWRpdFZlcnNpb24gPSB0aGlzLmFsYnVtQ29tbWVudHNbCiAgICAgICAgY29tbWVudEluZGV4CiAgICAgIF0uY29tbWVudEJvZHk7CiAgICB9LAogICAgY2FuY2VsRWRpdChkYXRlKSB7CiAgICAgIHZhciBjb21tZW50SW5kZXggPSB0aGlzLmFsYnVtQ29tbWVudHMuZmluZEluZGV4KGNvbW1lbnQgPT4gY29tbWVudC5kYXRlID09IGRhdGUpOwogICAgICB0aGlzLmFsYnVtQ29tbWVudHNbY29tbWVudEluZGV4XS5lZGl0ID0gZmFsc2U7CiAgICB9LAogICAgYXN5bmMgc3VibWl0RWRpdChkYXRlKSB7CiAgICAgIHZhciBjb21tZW50SW5kZXggPSB0aGlzLmFsYnVtQ29tbWVudHMuZmluZEluZGV4KGNvbW1lbnQgPT4gY29tbWVudC5kYXRlID09IGRhdGUpOwoKICAgICAgdGhpcy5hbGJ1bUNvbW1lbnRzW2NvbW1lbnRJbmRleF0uY29tbWVudEJvZHkgPSB0aGlzLmFsYnVtQ29tbWVudHNbY29tbWVudEluZGV4XS5lZGl0VmVyc2lvbgogICAgICB0aGlzLmFsYnVtQ29tbWVudHNbY29tbWVudEluZGV4XS5lZGl0ID0gZmFsc2UKCiAgICAgIHZhciB0bXAgPSBbXQogICAgICB0aGlzLmFsYnVtQ29tbWVudHMuZm9yRWFjaChjb21tZW50ID0+IHsKICAgICAgICAgIHRtcC5wdXNoKHsKICAgICAgICAgICAgYWxidW1JRDogY29tbWVudC5hbGJ1bUlELAogICAgICAgICAgICB1c2VyOiBjb21tZW50LnVzZXIsCiAgICAgICAgICAgIGNvbW1lbnRCb2R5OiBjb21tZW50LmNvbW1lbnRCb2R5LAogICAgICAgICAgICBkYXRlOiBjb21tZW50LmRhdGUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgKTsKCiAgICAgIGF3YWl0IHVwZGF0ZUNvbW1lbnRzKHRtcCk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgLy9hbGVydCgibW91bnRlZCIpCiAgICB0aGlzLmZldGNoQWxidW1Db21tZW50cygpOwogIH0KfTsKCi8vQ2hlY2sgaWYganNvbiBvYmplY3Qgd2l0aCBhbGJ1bUlEIGV4aXN0cwovL0lmIGl0IGRvZXNudCBleGlzdCBjcmVhdGUgaXQKLy9PbmNlIGNyZWF0ZWQgcHVzaCBvbnRvIGl0IHRoZSBjb21tZW50IHdpdGggdXNlcm5hbWUsIGNvbW1lbnQsIGRhdGVDcmVhdGVkCgoK"},{"version":3,"sources":["Comments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Comments.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <v-layout text-center wrap>\n      <div class=\"comments\">\n       Comment Section for album Component\n      </div>\n\n      <v-flex mb-5 xs12>\n        <v-layout justify-center></v-layout>\n      </v-flex>\n\n      <v-layout justify-center>\n        <v-flex xs6 mb-5>\n          <h2 class=\"headline font-weight-bold mb-3\">Make a comment</h2>\n          <v-layout justify-center>\n            <v-textarea outlined name=\"comment-box\" label=\"Make a comment\" value v-model=\"comment\"></v-textarea>\n          </v-layout>\n          <v-btn class=\"white--text\" color=\"deep-purple accent-4\" @click=\"submitComment\">Submit</v-btn>\n        </v-flex>\n      </v-layout>\n     \n      <v-layout justify-center v-for=\"comment in albumComments\" :key=\"comment.date\">\n      <v-card class=\"mx-6 mb-6\" color=\"green\" dark max-width=\"600\" min-width=\"500\">\n        <v-card-title>\n          <v-icon large left>mdi-comment</v-icon>\n          <span class=\"title font-weight-light\">Comment</span>\n        </v-card-title>\n\n        <v-card-text class=\"headline font-weight-bold\" v-if=\"comment.edit!=true\">{{comment.commentBody}}</v-card-text>\n        <div v-else>\n          <v-textarea\n            outlined\n            name=\"comment-box\"\n            label=\"Make a comment\"\n            value\n            v-model=\"comment.editVersion\"\n          ></v-textarea>\n          <v-btn\n            class=\"white--text\"\n            color=\"deep-purple accent-4\"\n            @click=\"submitEdit(comment.date)\"\n          >Submit</v-btn>\n          <v-btn\n            class=\"white--text\"\n            color=\"deep-purple accent-4\"\n            @click=\"cancelEdit(comment.date)\"\n          >Cancel</v-btn>\n        </div>\n\n        <v-card-actions>\n          <v-list-item class=\"grow\">\n            <v-list-item-avatar color=\"grey darken-3\">\n              <v-img\n                class=\"elevation-6\"\n                src=\"https://avataaars.io/?avatarStyle=Transparent&topType=ShortHairShortCurly&accessoriesType=Prescription02&hairColor=Black&facialHairType=Blank&clotheType=Hoodie&clotheColor=White&eyeType=Default&eyebrowType=DefaultNatural&mouthType=Default&skinColor=Light\"\n              ></v-img>\n            </v-list-item-avatar>\n\n            <v-list-item-content>\n              <v-list-item-title>{{comment.user}}</v-list-item-title>\n            </v-list-item-content>\n\n            <v-row align=\"center\" justify=\"end\" v-if=\"comment.user == userName\">\n              <v-icon class=\"mr-1\" @click=\"editComment(comment.date)\" v-if=\"comment.edit!=true\">mdi-pencil</v-icon>\n              <span class=\"subheading mr-2\" @click=\"editComment(comment.date)\" v-if=\"comment.edit!=true\">Edit</span>\n              <span class=\"mr-1\"></span>\n              <v-icon class=\"mr-1\" @click=\"deleteComment(comment.date)\">mdi-delete</v-icon>\n              <span class=\"subheading\" @click=\"deleteComment(comment.date)\">Delete</span>\n            </v-row>\n          </v-list-item>\n        </v-card-actions>\n      </v-card>\n    </v-layout>\n\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nimport {createComment} from \"../api/comment/Comment\";\nimport {getAlbumComments} from \"../api/comment/Comment\";\nimport {updateComments} from \"../api/comment/Comment\";\n\nexport default {\n  data: () => ({\n    userName: 'Steini',\n    comment: \"\",\n    albumID: \"776Uo845nYHJpNaStv1Ds4\",\n    albumComments: []\n  }),\n  methods: {\n    async submitComment() {\n      //checking if albumID exists\n      //let result = await axios.get('');\n      let comments = (await createComment({user: this.userName, commentBody: this.comment, albumID: this.albumID }));\n      this.albumComments.unshift({user: this.userName, commentBody: this.comment, albumID: this.albumID, date: new Date().getTime() })\n      this.comment = \"\";\n      return comments;\n      //console.log(comments);\n    },\n    async fetchAlbumComments() {\n      let comments = (await getAlbumComments({albumID: this.albumID }));\n      //this.albumComments = comments;\n\n      this.albumComments = [];\n\n      comments.forEach(comment => {\n          this.albumComments.push({\n            ...comment,\n            edit: false,\n            editVersion: \"\"\n          });\n        }\n      );\n\n      return comments;\n    },\n    async deleteComment(date) {\n\n      this.albumComments = this.albumComments.filter(comment => comment.date !== date);\n \n      var tmp = []\n      this.albumComments.forEach(comment => {\n          tmp.push({\n            albumID: comment.albumID,\n            user: comment.user,\n            commentBody: comment.commentBody,\n            date: comment.date\n          });\n        }\n      );\n\n      await updateComments(tmp);\n    },\n    async editComment(date) {\n      var commentIndex = this.albumComments.findIndex(comment => comment.date == date);\n      this.albumComments[commentIndex].edit = true;\n      this.albumComments[commentIndex].editVersion = this.albumComments[\n        commentIndex\n      ].commentBody;\n    },\n    cancelEdit(date) {\n      var commentIndex = this.albumComments.findIndex(comment => comment.date == date);\n      this.albumComments[commentIndex].edit = false;\n    },\n    async submitEdit(date) {\n      var commentIndex = this.albumComments.findIndex(comment => comment.date == date);\n\n      this.albumComments[commentIndex].commentBody = this.albumComments[commentIndex].editVersion\n      this.albumComments[commentIndex].edit = false\n\n      var tmp = []\n      this.albumComments.forEach(comment => {\n          tmp.push({\n            albumID: comment.albumID,\n            user: comment.user,\n            commentBody: comment.commentBody,\n            date: comment.date\n          });\n        }\n      );\n\n      await updateComments(tmp);\n    }\n  },\n  mounted() {\n    //alert(\"mounted\")\n    this.fetchAlbumComments();\n  }\n};\n\n//Check if json object with albumID exists\n//If it doesnt exist create it\n//Once created push onto it the comment with username, comment, dateCreated\n\n\n</script>\n\n"]}]}