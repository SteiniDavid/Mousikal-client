{"remainingRequest":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/steini/Documents/GitHub/Mousikal-client/src/components/ArtistPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/steini/Documents/GitHub/Mousikal-client/src/components/ArtistPage.vue","mtime":1576106054523},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/cache-loader/dist/cjs.js","mtime":499166100000},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/babel-loader/lib/index.js","mtime":499166100000},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/cache-loader/dist/cjs.js","mtime":499166100000},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/vue-loader/lib/index.js","mtime":499166100000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21tZW50cyBmcm9tICJAL2NvbXBvbmVudHMvQ29tbWVudHMudnVlIjsKCmltcG9ydCBfIGZyb20gImxvZGFzaCI7CmltcG9ydCB7IGdldEFydGlzdEFsYnVtcyB9IGZyb20gIi4uL2FwaS9zcG90aWZ5L3Nwb3RpZnkiOwppbXBvcnQgeyBnZXRBbGJ1bVRyYWNrcyB9IGZyb20gIi4uL2FwaS9zcG90aWZ5L3Nwb3RpZnkiOwoKaW1wb3J0IHsgZ2V0TGlrZXMgfSBmcm9tICIuLi9hcGkvcHJpdmF0ZS9wcml2YXRlIjsKaW1wb3J0IHsgY3JlYXRlTGlrZSB9IGZyb20gIi4uL2FwaS9wcml2YXRlL3ByaXZhdGUiOwppbXBvcnQgeyB1cGRhdGVMaWtlcyB9IGZyb20gIi4uL2FwaS9wcml2YXRlL3ByaXZhdGUiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvbW1lbnRzCiAgfSwKICBwcm9wczogewogICAgYXJ0aXN0SUQ6IFN0cmluZywKICAgIGxvZ2dlZEluVXNlck5hbWU6IFN0cmluZwogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIGFydGlzdDogIiIsCiAgICBhcnRpc3RJbmZvOiBbXSwKICAgIGFsYnVtQ2xpY2tlZE9uOiBmYWxzZSwKICAgIGNsaWNrZWRBbGJ1bUlEOiAiIiwKICAgIGNsaWNrZWRPbkluZm86IFtdLAogICAgdHJhY2tzOiBbXSwKICAgIGFsYnVtTGlrZXM6IFtdCiAgfSksCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0QXJ0aXN0SW5mbyhpZCkgewogICAgICB2YXIgciA9IGF3YWl0IGdldEFydGlzdEFsYnVtcyhpZCk7CiAgICAgIHRoaXMuYXJ0aXN0SW5mbyA9IHI7CiAgICAgIHRoaXMuZXh0cmFjdEluZm8oKTsKICAgIH0sCiAgICBleHRyYWN0SW5mbygpIHsKICAgICAgdGhpcy5hcnRpc3QgPSB0aGlzLmFydGlzdEluZm9bMF0uYXJ0aXN0OwogICAgICB0aGlzLmFydGlzdEluZm8gPSBfLnVuaXFCeSh0aGlzLmFydGlzdEluZm8sICJpbWFnZVVSTCIpOwogICAgICB0aGlzLmFydGlzdEluZm8gPSBfLnVuaXFCeSh0aGlzLmFydGlzdEluZm8sICJhbGJ1bSIpOwogICAgfSwKICAgIGFzeW5jIGdldEFsYnVtRGF0YShhbGJ1bUlEKSB7CiAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBnZXRBbGJ1bVRyYWNrcyhhbGJ1bUlEKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLnRyYWNrc1tpXSA9IHJlc3VsdFtpXTsKICAgICAgfQogICAgfSwKICAgIGFsYnVtQ2xpY2tlZChhbGJ1bUlELCBpbWFnZVVSTCwgYWxidW1OYW1lKSB7CiAgICAgIHRoaXMuYWxidW1DbGlja2VkT24gPSB0cnVlOwogICAgICB0aGlzLmdldEFsYnVtRGF0YShhbGJ1bUlEKTsKICAgICAgdGhpcy5jbGlja2VkT25JbmZvWzBdID0gaW1hZ2VVUkw7CiAgICAgIHRoaXMuY2xpY2tlZE9uSW5mb1sxXSA9IGFsYnVtTmFtZTsKICAgIH0sCiAgICAvLyBhbGJ1bUxpa2VkKGlkKSB7CiAgICAvLyAgIC8vcmV0dXJuIHRydWUgaWYgYWxidW0gbGlrZWQgYnkgdXNlciwgZWxzZSByZXR1cm4gZmFsc2UKCiAgICAvLyB9LAogICAgYWxidW1zTGlrZUNvdW50KGFsYnVtSUQpIHsKICAgICAgdmFyIGxpa2VOdW0gPSAwOwogICAgICB0aGlzLmFsYnVtTGlrZXMuZm9yRWFjaChsaWtlID0+IHsKICAgICAgICBpZiAoYWxidW1JRCA9PSBsaWtlLmFsYnVtSUQgJiYgbGlrZS5saWtlZCA9PSAidHJ1ZSIpIHsKICAgICAgICAgIGxpa2VOdW0rKzsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gbGlrZU51bTsKICAgIH0sCiAgICBhc3luYyBsaWtlQWxidW0oaWQpIHsKICAgICAgYXdhaXQgY3JlYXRlTGlrZSh7CiAgICAgICAgdXNlcjogdGhpcy5sb2dnZWRJblVzZXJOYW1lLAogICAgICAgIGFydGlzdElEOiB0aGlzLmFydGlzdElELAogICAgICAgIGFsYnVtSUQ6IGlkCiAgICAgIH0pOwogICAgICB0aGlzLmFsYnVtTGlrZXMucHVzaCh7CiAgICAgICAgYWxidW1JRDogaWQsCiAgICAgICAgYXJ0aXN0SUQ6IHRoaXMuYXJ0aXN0SUQsCiAgICAgICAgbGlrZWQ6ICJ0cnVlIiwKICAgICAgICB1c2VyOiB0aGlzLmxvZ2dlZEluVXNlck5hbWUKICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tpZlVzZXJMaWtlZChhbGJ1bUlEKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hbGJ1bUxpa2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgYWxidW1JRCA9PSB0aGlzLmFsYnVtTGlrZXNbaV0uYWxidW1JRCAmJgogICAgICAgICAgdGhpcy5sb2dnZWRJblVzZXJOYW1lID09IHRoaXMuYWxidW1MaWtlc1tpXS51c2VyICYmCiAgICAgICAgICB0aGlzLmFsYnVtTGlrZXNbaV0ubGlrZWQgPT0gInRydWUiCiAgICAgICAgKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGFzeW5jIGdldEFsbExpa2VzT2ZBbGJ1bShpZCkgewogICAgICB0aGlzLmFsYnVtTGlrZXMgPSBhd2FpdCBnZXRMaWtlcyh7IGFydGlzdElEOiBpZCB9KTsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKCJiZWZvcmUiKQogICAgICB3aW5kb3cuY29uc29sZS5sb2codGhpcy5hbGJ1bUxpa2VzKTsKICAgICAgaWYodGhpcy5hbGJ1bUxpa2VzLmxlbmd0aCA8IDEpIHsKICAgICAgICB0aGlzLmFsYnVtTGlrZXMgPSBbewogICAgICAgIGFsYnVtSUQ6IDAsCiAgICAgICAgYXJ0aXN0SUQ6ICJ0aGlzLmFydGlzdElEIiwKICAgICAgICBsaWtlZDogInRydWUiLAogICAgICAgIHVzZXI6ICJ0aGlzLmxvZ2dlZEluVXNlck5hbWUiCiAgICAgIH1dCiAgICAgIH0KICAgICAgLy93aW5kb3cuY29uc29sZS5sb2cobGlrZXMpCiAgICB9LAogICAgYXN5bmMgdW5saWtlQWxidW0oYWxidW1JRCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYWxidW1MaWtlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICgKICAgICAgICAgIGFsYnVtSUQgPT0gdGhpcy5hbGJ1bUxpa2VzW2ldLmFsYnVtSUQgJiYKICAgICAgICAgIHRoaXMubG9nZ2VkSW5Vc2VyTmFtZSA9PSB0aGlzLmFsYnVtTGlrZXNbaV0udXNlciAmJgogICAgICAgICAgdGhpcy5hbGJ1bUxpa2VzW2ldLmxpa2VkID09ICJ0cnVlIgogICAgICAgICkgewogICAgICAgICAgdGhpcy5hbGJ1bUxpa2VzLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgYXdhaXQgdXBkYXRlTGlrZXMoeyBsaWtlczogdGhpcy5hbGJ1bUxpa2VzLCBhcnRpc3RJRDogdGhpcy5hcnRpc3RJRCB9KTsKICAgIH0KICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBhd2FpdCB0aGlzLmdldEFydGlzdEluZm8odGhpcy5hcnRpc3RJRCk7CgogICAgdGhpcy5nZXRBbGxMaWtlc09mQWxidW0odGhpcy5hcnRpc3RJRCk7CiAgfQp9Owo="},{"version":3,"sources":["ArtistPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ArtistPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div v-if=\"!albumClickedOn\">\n      <div>\n        <h1>{{artist}}</h1>\n      </div>\n\n      <v-container>\n        <v-row dense>\n          <v-col v-for=\"album in artistInfo\" :key=\"album.albumID\" :cols=\"4\">\n            <v-card>\n              <v-img\n                v-on:click=\"albumClicked(album.albumID, album.imageURL, album.album)\"\n                :src=\"album.imageURL\"\n                class=\"white--text align-end\"\n                gradient=\"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)\"\n                height=\"auto\"\n                width=\"auto\"\n              ></v-img>\n              <v-card-actions>\n                <v-card-title>\n                  <span class=\"title font-weight-light\">{{album.album}}</span>\n                </v-card-title>\n                <div v-if=\"loggedInUserName!='Anonymous'\">\n                  <v-btn icon v-if=\"!checkifUserLiked(album.albumID)\">\n                    <v-icon color=\"gray\" v-on:click=\"likeAlbum(album.albumID)\">mdi-heart</v-icon>\n                  </v-btn>\n                  <v-btn icon v-if=\"checkifUserLiked(album.albumID)\">\n                    <v-icon color=\"red\" v-on:click=\"unlikeAlbum(album.albumID)\">mdi-heart</v-icon>\n                  </v-btn>\n                  {{albumsLikeCount(album.albumID)}}\n                </div>\n              </v-card-actions>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-container>\n    </div>\n    <br />\n    <div v-if=\"albumClickedOn\">\n      <Comments\n        :loggedInUserName=\"this.loggedInUserName\"\n        :albumURL=\"clickedOnInfo[0]\"\n        :albumName=\"clickedOnInfo[1]\"\n        :tracks=\"this.tracks\"\n        :artistName=\"this.artist\"\n      ></Comments>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Comments from \"@/components/Comments.vue\";\n\nimport _ from \"lodash\";\nimport { getArtistAlbums } from \"../api/spotify/spotify\";\nimport { getAlbumTracks } from \"../api/spotify/spotify\";\n\nimport { getLikes } from \"../api/private/private\";\nimport { createLike } from \"../api/private/private\";\nimport { updateLikes } from \"../api/private/private\";\n\nexport default {\n  components: {\n    Comments\n  },\n  props: {\n    artistID: String,\n    loggedInUserName: String\n  },\n  data: () => ({\n    artist: \"\",\n    artistInfo: [],\n    albumClickedOn: false,\n    clickedAlbumID: \"\",\n    clickedOnInfo: [],\n    tracks: [],\n    albumLikes: []\n  }),\n  methods: {\n    async getArtistInfo(id) {\n      var r = await getArtistAlbums(id);\n      this.artistInfo = r;\n      this.extractInfo();\n    },\n    extractInfo() {\n      this.artist = this.artistInfo[0].artist;\n      this.artistInfo = _.uniqBy(this.artistInfo, \"imageURL\");\n      this.artistInfo = _.uniqBy(this.artistInfo, \"album\");\n    },\n    async getAlbumData(albumID) {\n      let result = await getAlbumTracks(albumID);\n      for (var i = 0; i < result.length; i++) {\n        this.tracks[i] = result[i];\n      }\n    },\n    albumClicked(albumID, imageURL, albumName) {\n      this.albumClickedOn = true;\n      this.getAlbumData(albumID);\n      this.clickedOnInfo[0] = imageURL;\n      this.clickedOnInfo[1] = albumName;\n    },\n    // albumLiked(id) {\n    //   //return true if album liked by user, else return false\n\n    // },\n    albumsLikeCount(albumID) {\n      var likeNum = 0;\n      this.albumLikes.forEach(like => {\n        if (albumID == like.albumID && like.liked == \"true\") {\n          likeNum++;\n        }\n      });\n      return likeNum;\n    },\n    async likeAlbum(id) {\n      await createLike({\n        user: this.loggedInUserName,\n        artistID: this.artistID,\n        albumID: id\n      });\n      this.albumLikes.push({\n        albumID: id,\n        artistID: this.artistID,\n        liked: \"true\",\n        user: this.loggedInUserName\n      });\n    },\n    checkifUserLiked(albumID) {\n      for (var i = 0; i < this.albumLikes.length; i++) {\n        if (\n          albumID == this.albumLikes[i].albumID &&\n          this.loggedInUserName == this.albumLikes[i].user &&\n          this.albumLikes[i].liked == \"true\"\n        ) {\n          return true;\n        }\n      }\n      return false;\n    },\n    async getAllLikesOfAlbum(id) {\n      this.albumLikes = await getLikes({ artistID: id });\n      window.console.log(\"before\")\n      window.console.log(this.albumLikes);\n      if(this.albumLikes.length < 1) {\n        this.albumLikes = [{\n        albumID: 0,\n        artistID: \"this.artistID\",\n        liked: \"true\",\n        user: \"this.loggedInUserName\"\n      }]\n      }\n      //window.console.log(likes)\n    },\n    async unlikeAlbum(albumID) {\n      for (var i = 0; i < this.albumLikes.length; i++) {\n        if (\n          albumID == this.albumLikes[i].albumID &&\n          this.loggedInUserName == this.albumLikes[i].user &&\n          this.albumLikes[i].liked == \"true\"\n        ) {\n          this.albumLikes.splice(i, 1);\n        }\n      }\n      await updateLikes({ likes: this.albumLikes, artistID: this.artistID });\n    }\n  },\n  async mounted() {\n    await this.getArtistInfo(this.artistID);\n\n    this.getAllLikesOfAlbum(this.artistID);\n  }\n};\n</script>\n\n"]}]}